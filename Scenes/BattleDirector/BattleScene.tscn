[gd_scene load_steps=8 format=3 uid="uid://b0mrgr7h0ty1y"]

[ext_resource type="Script" uid="uid://bttu0wmy2fp64" path="res://Scenes/BattleDirector/Scripts/BattleDirector.cs" id="1_jmdo1"]
[ext_resource type="Script" uid="uid://pl57giqyhckb" path="res://Scenes/UI/Scripts/MenuModule.cs" id="2_ka0ws"]
[ext_resource type="Script" uid="uid://tg14hkh1n7iv" path="res://Scenes/BattleDirector/Scripts/Conductor.cs" id="3_elcaj"]
[ext_resource type="PackedScene" uid="uid://dfevfib11kou1" path="res://Scenes/ChartViewport/ChartViewport.tscn" id="5_r2xh0"]
[ext_resource type="Texture2D" uid="uid://qhwve7fik4do" path="res://SharedAssets/BackGround_Full.png" id="6_0jtpx"]
[ext_resource type="Texture2D" uid="uid://dbjotl0v1ymia" path="res://SharedAssets/BattleFrame1.png" id="7_klvil"]
[ext_resource type="Theme" uid="uid://d37e3tpsbxwak" path="res://Scenes/UI/Assets/GeneralTheme.tres" id="8_62qim"]

[node name="ProtoBattleDirector" type="Node2D" node_paths=PackedStringArray("CD", "CM", "Audio", "_reinitButton", "_startButton", "_pauseButton", "_beatLabel", "_resumeButton", "_saveButton", "_loadName", "_saveName", "_holdLength", "_beatOffset", "_bpmSelector", "_loopsSelector", "_selectSongButton", "_selectSongLabel")]
process_mode = 1
script = ExtResource("1_jmdo1")
CD = NodePath("Conductor")
CM = NodePath("SubViewport")
Audio = NodePath("AudioStreamPlayer")
_reinitButton = NodePath("Buttons/ReInitButton")
_startButton = NodePath("Buttons/StartButton")
_pauseButton = NodePath("Buttons/PauseButton")
_beatLabel = NodePath("BeatLabel")
_resumeButton = NodePath("Buttons/ResumeButton")
_saveButton = NodePath("Buttons/SaveButton")
_loadName = NodePath("LoadLabel/LoadName")
_saveName = NodePath("SaveLabel/SaveName")
_holdLength = NodePath("Length/Length")
_beatOffset = NodePath("Offset/PlacementOffset")
_bpmSelector = NodePath("BPM/BPM")
_loopsSelector = NodePath("Loops/NumLoops")
_selectSongButton = NodePath("Buttons/SelectSongButton")
_selectSongLabel = NodePath("Buttons/SelectSongButton/SongPathLabel")
metadata/_edit_lock_ = true

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]

[node name="UILayer" type="CanvasLayer" parent="." node_paths=PackedStringArray("CurSceneNode")]
script = ExtResource("2_ka0ws")
CurSceneNode = NodePath("..")

[node name="Conductor" type="Node" parent="." node_paths=PackedStringArray("CM")]
script = ExtResource("3_elcaj")
CM = NodePath("../SubViewport")

[node name="SubViewport" parent="." instance=ExtResource("5_r2xh0")]
offset_top = 180.0
offset_right = 640.0
offset_bottom = 360.0

[node name="BackGround" type="TextureRect" parent="."]
z_index = -1
offset_right = 640.0
offset_bottom = 178.0
texture = ExtResource("6_0jtpx")

[node name="NinePatchRect" type="NinePatchRect" parent="."]
offset_top = 180.0
offset_right = 640.0
offset_bottom = 360.0
texture = ExtResource("7_klvil")
region_rect = Rect2(107, 0, 396, 182)

[node name="Buttons" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="ReInitButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 547.0
offset_top = 10.0
offset_right = 627.0
offset_bottom = 47.0
tooltip_text = "Reloads the entire track to the Load Chart. Note: THIS DOES NOT SAVE PROGRESS."
theme = ExtResource("8_62qim")
disabled = true
text = "RELOAD
"

[node name="StartButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 494.0
offset_top = 10.0
offset_right = 545.0
offset_bottom = 47.0
tooltip_text = "After a reload, restarts playback. This is once per reload."
theme = ExtResource("8_62qim")
text = "Start"

[node name="ResumeButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 511.0
offset_top = 54.0
offset_right = 572.0
offset_bottom = 91.0
tooltip_text = "Resume current playback."
theme = ExtResource("8_62qim")
text = "Resume"

[node name="PauseButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 574.0
offset_top = 54.0
offset_right = 626.0
offset_bottom = 91.0
tooltip_text = "Pause the current playback."
theme = ExtResource("8_62qim")
text = "Pause
"

[node name="SaveButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 20.0
offset_top = 122.0
offset_right = 72.0
offset_bottom = 159.0
tooltip_text = "Saves the current work to the file with the name Save Chart. File extension is always .tres."
theme = ExtResource("8_62qim")
text = "Save"

[node name="SelectSongButton" type="Button" parent="Buttons"]
layout_mode = 0
offset_left = 244.0
offset_top = 21.0
offset_right = 366.0
offset_bottom = 58.0
theme = ExtResource("8_62qim")
text = "Select Song File"

[node name="SongPathLabel" type="Label" parent="Buttons/SelectSongButton"]
layout_mode = 0
offset_left = 4.0
offset_top = 35.0
offset_right = 257.0
offset_bottom = 76.0
text = "Song File: "
autowrap_mode = 2

[node name="BeatLabel" type="Label" parent="."]
offset_left = 252.0
offset_top = 5.0
offset_right = 346.0
offset_bottom = 17.0
text = "Beat: 0 Loop:0"

[node name="LoadLabel" type="Label" parent="."]
offset_left = 11.0
offset_top = 14.0
offset_right = 87.0
offset_bottom = 26.0
text = "Load Chart:"

[node name="LoadName" type="TextEdit" parent="LoadLabel"]
layout_mode = 0
offset_left = 81.0
offset_top = -4.0
offset_right = 224.0
offset_bottom = 31.0
tooltip_text = "Load Path"
text = "Song1"
placeholder_text = "Song1"

[node name="SaveLabel" type="Label" parent="."]
offset_left = 14.0
offset_top = 56.0
offset_right = 90.0
offset_bottom = 68.0
text = "Save Chart:"

[node name="SaveName" type="TextEdit" parent="SaveLabel"]
layout_mode = 0
offset_left = 79.0
offset_top = -1.0
offset_right = 222.0
offset_bottom = 34.0
tooltip_text = "Save Path (Do not add extension)
"
text = "NewSong1"
placeholder_text = "NewSong1"

[node name="Length" type="Label" parent="."]
offset_left = 143.0
offset_top = 156.0
offset_right = 189.0
offset_bottom = 168.0
text = "Length:"

[node name="Length" type="SpinBox" parent="Length"]
layout_mode = 0
offset_left = 48.0
offset_top = -5.0
offset_right = 122.0
offset_bottom = 15.0
tooltip_text = "The length of a hold note, places normal note if length is 0."
max_value = 3.0
step = 0.5

[node name="Offset" type="Label" parent="."]
offset_left = 315.0
offset_top = 156.0
offset_right = 361.0
offset_bottom = 168.0
text = "Offset:"

[node name="PlacementOffset" type="SpinBox" parent="Offset"]
layout_mode = 0
offset_left = 48.0
offset_top = -5.0
offset_right = 122.0
offset_bottom = 15.0
tooltip_text = "The offset from the exact beat."
max_value = 0.9
step = 0.1

[node name="BPM" type="Label" parent="."]
offset_left = 313.0
offset_top = 120.0
offset_right = 359.0
offset_bottom = 132.0
text = "BPM:"

[node name="BPM" type="SpinBox" parent="BPM"]
layout_mode = 0
offset_left = 48.0
offset_top = -5.0
offset_right = 122.0
offset_bottom = 15.0
min_value = 30.0
max_value = 300.0
value = 120.0

[node name="Loops" type="Label" parent="."]
offset_left = 128.0
offset_top = 111.0
offset_right = 189.0
offset_bottom = 138.0
text = "Loops
Per Song:"

[node name="NumLoops" type="SpinBox" parent="Loops"]
layout_mode = 0
offset_left = 65.0
offset_top = 7.0
offset_right = 139.0
offset_bottom = 27.0
min_value = 1.0
max_value = 7.0
value = 5.0
